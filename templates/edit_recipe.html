{% extends 'base.html' %} {% block content %}
<h3>Edit Recipe</h3>
<!-- Recipe Name -->
<div class="container">
  <form action="{{ url_for('update_recipe', recipe_id=recipe._id)}}" method="POST" class="col s12">
    <div class="row">
      <div class="input-field col s6">
        <i class="fas fa-utensils"></i>
        <input
          id="recipe_name"
          name="recipe_name"
          type="text"
          class="validate"
          value="{{recipe.recipe_name}}"
        />
        <label for="icon_prefix">Recipe Name</label>
      </div>
    </div>
     <!--Recipe Image-->
            <div class="row">
                <div class="input-field col s6">
                        {% if recipe.image_url %}
                        <img height="200" width="200" src="{{recipe.image_url}}" alt="photo of dish"> 
                        {% else %}
                        <img height="200" width="200" src="{{ url_for('static', filename='images/placeholder.png')}}" alt="photo of dish">
                        {% endif %}
                        <label for="image_url">Recipe Image</label>
                    </div>
                </div>
    <!-- Meal Type -->
    <div class="row">
      <div class="input-field col s6">
        <select id="category" name="category">
          <option value="" disabled selected>Select a meal type</option>
          {% for cat in categories %} {% if cat.category == recipe.category%}
          <option value="{{cat.category}}" selected>{{cat.category}}</option>
          {% else %}
          <option value="{{cat.category}}">{{cat.category}}</option>
          {% endif %} {% endfor %}
        </select>
        <label>Meal Type:</label>
      </div>
    </div>
    <!-- Difficulty Level -->
    <div class="row">
      <div class="input-field col s6">
        <select name="difficulty">
          <option value="" disabled selected>Select a difficulty level</option>
           {% for level in levels %}
           {% if level.difficulty == recipe.difficulty%}
          <option value="{{level.difficulty}}" selected>{{level.difficulty}}</option>
            {% else %}
            <option value="{{level.difficulty}}">{{level.difficulty}}</option>
          {% endif %} 
          {% endfor %}
        </select>
        <label>Difficulty:</label>
      </div>
    </div>
    <!-- Cuisine -->
    <div class="row">
      <div class="input-field col s6">
        <select name="cuisine">
          <option value="" disabled selected>Select a cuisine</option>
          {% for cuisine in cuisines %}
            {% if cuisine.cuisine == recipe.cuisine%}
          <option value="{{cuisine.cuisine}}" selected>{{cuisine.cuisine}}</option>
             {% else %}
          <option value="{{cuisine.cuisine}}">{{cuisine.cuisine}}</option>
          {% endif %} 
          {% endfor %}
        </select>
        <label>Cuisine:</label>
      </div>
    </div>
    <!-- Servings -->
    <div class="row">
      <div class="input-field col s6">
        <input
          id="servings"
          name="servings"
          type="number"
          placeholder="Servings"
          class="validate"
          min="1"
          required=""
          value="{{recipe.servings}}"
        />
        <label>Number of Servings</label>
      </div>
    </div>
    <!-- Time -->
    <div class="row">
      <div class="input-field col s6">
        <label>Cooking Time (Mins)</label>
        <input
          id="time"
          name="time"
          placeholder="Cooking time"
          class="validate"
          type="number"
          min="1"
          required=""
          value="{{recipe.time}}"
        />
      </div>
    </div>
    <!-- Ingredients -->
    <div class="row">
      <div class="col s12">
        <h5>Ingredients:</h5>
        <p>Add each ingredient on a new line</p>
        <textarea
          id="ingredients"
          name="ingredients"
          class="materialize-textarea validate"
          required=""
          value="{{recipe.ingredients}}"
        ></textarea>
      </div>
    </div>
    <!-- Method -->
    <div class="row">
      <div class="col s12">
        <h5>Cooking instructions:</h5>
        <p>Add each step on a new line</p>
        <textarea
          id="method"
          name="method"
          class="materialize-textarea validate"
          required=""
          value="{{recipe.method}}"
        ></textarea>
      </div>
    </div>
    <!-- Allergens -->
    <div class="row">
      <div class="input-field col s6">
        <select name="allergens" multiple>
          <option value="" disabled selected>Check allergens</option>
          {% for allergen in allergens %}
          {% if allergen.allergen == recipe.allergen%}
          <option value="{{allergen.allergen}}" selected>{{allergen.allergen}}</option>
            {% else %}
          <option value="{{allergen.allergen}}">{{allergen.allergen}}</option>
            {% endif %} 
          {% endfor %}
        </select>
        <label>Allergens:</label>
      </div>
    </div>
    <button class="btn waves-effect waves-light" type="submit" name="action">
      Update Recipe
    </button>
  </form>
</div>

{% endblock %}
